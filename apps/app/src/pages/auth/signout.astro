---
import { createServerClient } from '../../lib/supabase';

const supabase = createServerClient(Astro.cookies, Astro.request.headers);

// Handle sign out
if (Astro.request.method === 'POST') {
  try {
    await supabase.auth.signOut();
  } catch (error) {
    console.error('Sign out error:', error);
  }

  return Astro.redirect('/signin');
}

// If accessed via GET, redirect to signin
return Astro.redirect('/signin');
---

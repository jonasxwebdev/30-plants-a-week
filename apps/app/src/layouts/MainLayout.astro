---
import GlobalAddPlant from '../components/GlobalAddPlant.vue';
import UsernameSetup from '../components/UsernameSetup.vue';
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  activeRoute?: string;
}

const {
  title,
  description = 'Verfolge deine pflanzenbasierte Ern√§hrung',
  activeRoute,
} = Astro.props;
const currentPath = activeRoute || Astro.url.pathname;
---

<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} - 30 Plants A Week</title>
    <meta name="description" content={description} />
    <meta name="theme-color" content="#ffffff" />

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="30 Plants" />
  </head>
  <body class="bg-background text-text pb-24">
    <main class="max-w-md mx-auto px-4 py-6 min-h-[calc(100vh-5rem)]">
      <slot />
    </main>

    <GlobalAddPlant client:load />
    <UsernameSetup client:load />

    <!-- Bottom Navigation -->
    <nav
      class="fixed bottom-6 left-4 right-4 bg-white/90 backdrop-blur-lg border border-white/20 shadow-float rounded-3xl flex justify-around py-3 z-30"
    >
      <a
        href="/"
        class={`flex flex-col items-center gap-1 px-4 py-1 text-[10px] font-medium transition-colors ${
          currentPath === '/' ? 'text-primary' : 'text-gray-400 hover:text-text'
        }`}
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>Tracker</span>
      </a>
      <a
        href="/history"
        class={`flex flex-col items-center gap-1 px-4 py-1 text-[10px] font-medium transition-colors ${
          currentPath === '/history' ? 'text-primary' : 'text-gray-400 hover:text-text'
        }`}
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
        </svg>
        <span>Tagebuch</span>
      </a>
      <a
        href="/friends"
        class={`flex flex-col items-center gap-1 px-4 py-1 text-[10px] font-medium transition-colors ${
          currentPath === '/friends' ? 'text-primary' : 'text-gray-400 hover:text-text'
        }`}
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <span>Freunde</span>
      </a>
      <a
        href="/profile"
        class={`flex flex-col items-center gap-1 px-4 py-1 text-[10px] font-medium transition-colors ${
          currentPath === '/profile' ? 'text-primary' : 'text-gray-400 hover:text-text'
        }`}
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span>Profil</span>
      </a>
    </nav>
  </body>
</html>
